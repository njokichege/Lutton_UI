
@page "/classdetails/{id}"
@inherits ClassDetailsBase

<MudGrid Class="mt-n12 px-5">
    <MudItem xs="9">
        <MudText Typo="Typo.h5" Class="d-flex justify-start">CLASS DETAILS</MudText>
    </MudItem>
    <MudItem xs="3" Class="d-flex justify-end">
        <MudIconButton Icon="@Icons.Material.Filled.Message" Color="Color.Inherit" Edge="Edge.End" />
        <MudIconButton Icon="@Icons.Material.Filled.Notifications" Color="Color.Inherit" Edge="Edge.End" />
    </MudItem>
</MudGrid>
<MudDivider DividerType="DividerType.FullWidth" />

@if (dataIsLoaded == false)
{
    <MudProgressCircular Size="Size.Large" Color="Color.Secondary" Indeterminate="true"/>
}
else
{
    <MudGrid Class="pa-10">
        <MudItem xs="3">
            <MudCard>
                <MudCardHeader Class="d-flex flex-column object-center">
                    <MudAvatar Style="height:100px; width:100px;" Color="Color.Warning" Variant="Variant.Outlined">
                        <MudImage ObjectPosition="ObjectPosition.Center" Src="images/mercyNjoki.jpg"></MudImage>
                    </MudAvatar>
                    <MudText Typo="Typo.h6" Class="mt-4 mb-n12">@ClassSelected.ClassTeacherName()</MudText>
                </MudCardHeader>
                <MudCardContent>
                    <MudDivider DividerType="DividerType.FullWidth" Class="my-6" />
                    <MudText Typo="Typo.body2">TSC Number : @ClassSelected.Teacher.TSCNumber</MudText>
                    <MudDivider DividerType="DividerType.FullWidth" Class="my-6" />
                    <MudText Typo="Typo.body2">Designation : @ClassSelected.Teacher.Staff.Designation</MudText>
                    <MudDivider DividerType="DividerType.FullWidth" Class="my-6" />
                    <MudText Typo="Typo.body2">Subjects @ClassSelected.Teacher.SubjectSpecializationOne | @ClassSelected.Teacher.SubjectSpecializationTwo</MudText>
                    <MudDivider DividerType="DividerType.FullWidth" Class="my-6" />
                </MudCardContent>
                <MudCardActions>
                    <MudButton Style="background-color:#e38d43" Class="mt-n12" Variant="Variant.Filled" FullWidth="true">Remove as class teacher</MudButton>
                </MudCardActions>
            </MudCard>
        </MudItem>
        <MudItem xs="8" Class="d-flex justify-space-between gap-1">
            <MudTabs ApplyEffectsToContainer="true" Border="true" Color="Color.Surface">
                <MudTabPanel Text="Students">
                    @if (Students is null)
                    {
                        <MudProgressCircular Size="Size.Large" Color="Color.Secondary" Indeterminate="true" />
                    }
                    else
                    {
                        <MudDataGrid Items="@Students" Filterable="false" SortMode="@SortMode.None" Groupable="false">
                            <Columns>
                                <PropertyColumn Property="x => x.StudentNumber" Title="Student Number" />
                                <PropertyColumn Property="x => x.StudentName()" Title="Name" />
                                <PropertyColumn Property="x => x.Age()" Title="Age" />
                                <PropertyColumn Property="x => x.AdmissionDate.ToShortDateString()" Title="Admission Date" />
                            </Columns>
                        </MudDataGrid>
                    }
                </MudTabPanel>
                <MudTabPanel Text="Students">
                    @if (Students is null)
                    {
                        <MudProgressCircular Size="Size.Large" Color="Color.Secondary" Indeterminate="true" />
                    }
                    else
                    {
                        <MudDataGrid Items="@Students" Filterable="false" SortMode="@SortMode.None" Groupable="false">
                            <Columns>
                                <PropertyColumn Property="x => x.StudentNumber" Title="Student Number" />
                                <PropertyColumn Property="x => x.StudentName()" Title="Name" />
                                <PropertyColumn Property="x => x.Age()" Title="Age" />
                                <PropertyColumn Property="x => x.AdmissionDate.ToShortDateString()" Title="Admission Date" />
                            </Columns>
                        </MudDataGrid>
                    }
                </MudTabPanel>
            </MudTabs>
        </MudItem>
    </MudGrid>
}


